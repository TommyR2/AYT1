
/* Base polish */
html, body { height: 100%; }
body { margin: 0; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; -webkit-tap-highlight-color: transparent; }

/* Page layout */
.layout { display: flex; gap: 1rem; align-items: flex-start; padding: 0 1rem 1rem; }
.layout .left { flex: 2 1 640px; min-width: 0; }
#sidebar { flex: 1 1 320px; position: sticky; top: calc(48px + env(safe-area-inset-top)); align-self: flex-start; max-height: calc(100vh - 80px); overflow: auto; padding-right: .25rem; }

/* Heatmap area: allow horizontal scroll on phones */
.heatmap-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 8px; }
.heatmap-wrap svg { display: block; }

/* Week buttons: touch friendly & scrollable */
.week-buttons { display: flex; gap: .5rem; overflow-x: auto; -webkit-overflow-scrolling: touch; padding: .5rem 1rem; position: sticky; top: env(safe-area-inset-top); background: inherit; border-bottom: 1px solid rgba(127,127,127,.25); }
.week-buttons .btn { flex: 0 0 auto; padding: .5rem .75rem; min-height: 40px; font-size: 16px; border-radius: .75rem; border: 1px solid rgba(127,127,127,.35); background: transparent; color: inherit; }
.week-buttons .btn.active { border-color: rgba(127,127,127,.7); box-shadow: 0 0 0 2px rgba(127,127,127,.15) inset; }

/* Ceremony table tweaks */
.ceremony-table { width: 100%; border-collapse: collapse; }
.ceremony-table th, .ceremony-table td { padding: 10px 12px; border-bottom: 1px solid rgba(127,127,127,.25); }
.ceremony .pair-new { background: color-mix(in srgb, #00ff88 12%, transparent); }

/* Legend spacing */
#legend { padding: .5rem 1rem .75rem; }
#legend svg { overflow: visible; }
#legend svg text { fill: currentColor; font-size: 12px; }

/* Header */
header { position: sticky; top: 0; padding: .5rem 1rem; padding-top: calc(.5rem + env(safe-area-inset-top)); background: inherit; z-index: 10; }
header h1 { font-size: 1.25rem; margin: 0 0 .25rem; }

/* Responsive: stack on small screens */
@media (max-width: 900px) {
  #sidebar { top: calc(44px + env(safe-area-inset-top)); }
}
@media (max-width: 768px) {
  .layout { flex-direction: column; }
  #sidebar { position: static; max-height: none; padding-right: 0; }
  .ceremony-table th, .ceremony-table td { padding: 8px 10px; }
}
```css
/* Base polish */
html, body { height: 100%; }
body { margin: 0; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; -webkit-tap-highlight-color: transparent; }

/* Page layout */
.layout { display: flex; gap: 1rem; align-items: flex-start; padding: 0 1rem 1rem; }
.layout .left { flex: 2 1 640px; min-width: 0; }
#sidebar { flex: 1 1 320px; position: sticky; top: calc(48px + env(safe-area-inset-top)); align-self: flex-start; max-height: calc(100vh - 80px); overflow: auto; padding-right: .25rem; }

/* Heatmap area: allow horizontal scroll on phones */
.heatmap-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; padding-bottom: 8px; }
.heatmap-wrap svg { display: block; }

/* Week buttons: touch friendly & scrollable */
.week-buttons { display: flex; gap: .5rem; overflow-x: auto; -webkit-overflow-scrolling: touch; padding: .5rem 1rem; position: sticky; top: env(safe-area-inset-top); background: inherit; border-bottom: 1px solid rgba(127,127,127,.25); }
.week-buttons .btn { flex: 0 0 auto; padding: .5rem .75rem; min-height: 40px; font-size: 16px; border-radius: .75rem; border: 1px solid rgba(127,127,127,.35); background: transparent; color: inherit; }
.week-buttons .btn.active { border-color: rgba(127,127,127,.7); box-shadow: 0 0 0 2px rgba(127,127,127,.15) inset; }

/* Ceremony table tweaks */
.ceremony-table { width: 100%; border-collapse: collapse; }
.ceremony-table th, .ceremony-table td { padding: 10px 12px; border-bottom: 1px solid rgba(127,127,127,.25); }
.ceremony .pair-new { background: color-mix(in srgb, #00ff88 12%, transparent); }

/* Legend spacing */
#legend { padding: .5rem 1rem .75rem; }

/* Header */
header { position: sticky; top: 0; padding: .5rem 1rem; padding-top: calc(.5rem + env(safe-area-inset-top)); background: inherit; z-index: 10; }
header h1 { font-size: 1.25rem; margin: 0 0 .25rem; }

/* Responsive: stack on small screens */
@media (max-width: 900px) {
  #sidebar { top: calc(44px + env(safe-area-inset-top)); }
}
@media (max-width: 768px) {
  .layout { flex-direction: column; }
  #sidebar { position: static; max-height: none; padding-right: 0; }
  .ceremony-table th, .ceremony-table td { padding: 8px 10px; }
}
